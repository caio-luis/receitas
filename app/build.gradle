apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

android {
    compileSdk 31

    defaultConfig {
        applicationId "com.caioluis.receitas"
        minSdk 23
        targetSdk 30
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        vectorDrawables {
            useSupportLibrary true
        }
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    sourceSets {
        String sharedTestDir = 'src/sharedTest/java'
        test {
            java.srcDir sharedTestDir
        }
        androidTest {
            java.srcDir sharedTestDir
            resources.srcDirs += ['src/test/resources']
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = "1.8"
        useIR = true
    }
    buildFeatures {
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion DesignVersions.compose
        kotlinCompilerVersion KotlinCoreVersions.kotlinVersion
    }
    packagingOptions {
        resources {
            excludes += '/META-INF/{AL2.0,LGPL2.1}'
        }
    }
}

dependencies {
    implementation CoreDependencies.kotlinStdLib
    implementation CoreDependencies.appCompat
    implementation CoreDependencies.ktxCore

    implementation Dependencies.constraintLayout
    implementation Dependencies.materialDesign
    debugImplementation Dependencies.composeUiTooling
    implementation Dependencies.composeMaterial
    implementation Dependencies.composeActivity
    implementation Dependencies.composeUi

    implementation Dependencies.rxAndroid
    implementation Dependencies.rxKotlin
    implementation Dependencies.rxJava
    implementation Dependencies.gson
    implementation Dependencies.roomRxJava2
    implementation Dependencies.room
    implementation Dependencies.dagger
    implementation Dependencies.lifecycle

    kapt Dependencies.daggerCompiler
    kapt Dependencies.roomCompiler

    testImplementation TestDependencies.junit
    testImplementation TestDependencies.coreTesting
    testImplementation TestDependencies.mockitoCore

    androidTestImplementation TestDependencies.androidxJUnit
    androidTestImplementation TestDependencies.androidTestRunner
    androidTestImplementation TestDependencies.androidTestRules
    androidTestImplementation TestDependencies.androidTestCore
    androidTestImplementation TestDependencies.androidCoreKtx
    androidTestImplementation TestDependencies.coreTesting
}